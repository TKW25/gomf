version: '3.2'

services:
    gomf:
        image: gomf
        build:
            context: .
            dockerfile: ./docker/go/Dockerfile
        restart: always
        ports: 
            - "8080:8080"
        volumes:
            - type: bind
              source: /gomf/files
              target: /gomf/files
    db:
        image: db
        build: 
            context: ./docker/postgres
        restart: always
        ports:
            - "8001:5432"
        environment:
            POSTGRES_USERNAME: postgres
            POSTGRES_PASSWORD: postgres
        volumes:
            - type: bind
              source: /gomf/postgres-data
              target: /var/lib/postgresql/data
